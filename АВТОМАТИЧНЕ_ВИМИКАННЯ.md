# Автоматичне вимикання двигуна при досягненні кута

## 🎯 Новий функціонал

Двигун **автоматично вимикається**, коли досягає заданого кута. Не потрібно натискати кнопку стоп!

---

## ⚙️ Як це працює

1. **Встановлюєте цільовий кут** (через меню або абсолютний енкодер)
2. **Натискаєте кнопку старт-стоп** → двигун починає рухатися
3. **Двигун рухається** до заданого кута
4. **Коли кут досягнуто** → двигун **автоматично вимикається** ✅
5. **Світлодіод гасне** → індикація, що двигун зупинився

---

## 📊 Послідовність роботи

```
1. Встановіть кут (90°)
   ↓
2. Натисніть старт-стоп (світлодіод світиться)
   ↓
3. Двигун рухається до 90°
   ↓
4. Кут досягнуто (Position: REACHED)
   ↓
5. Двигун автоматично вимикається ✅
   ↓
6. Світлодіод гасне
```

---

## 🔍 Перевірка досягнення

Система автоматично перевіряє досягнення позиції:
- **Точність:** різниця менше 2 кроків
- **Статус:** "Position: REACHED" на екрані
- **Автоматичне вимикання:** двигун вимикається миттєво

---

## 💡 Переваги

✅ **Автоматичне вимикання** - не потрібно натискати стоп  
✅ **Безпека** - двигун не працює без потреби  
✅ **Економія енергії** - двигун вимикається автоматично  
✅ **Візуальна індикація** - світлодіод показує стан  

---

## 📺 Що відображається на екрані

### До досягнення:
```
┌────────────────────┐
│ Status              │
│ Current:  45°       │
│ Target:  90°       │
│ Position: Moving   │  ← Двигун рухається
│ Dir: CW            │
└────────────────────┘
```

### Після досягнення:
```
┌────────────────────┐
│ Status              │
│ Current:  90°       │  ← Досягнуто!
│ Target:  90°       │
│ Position: OK       │  ← Позиція досягнута
│ Dir: CW            │
└────────────────────┘
```

**Світлодіод:** Гасне автоматично ✅

---

## 🔄 Повторне використання

Після автоматичного вимикання:

1. **Встановіть новий кут** (якщо потрібно)
2. **Натисніть старт-стоп** → двигун знову запускається
3. **Двигун рухається** до нового кута
4. **Автоматично вимикається** при досягненні

---

## ⚠️ Важливо

- **Точність:** Позиція вважається досягнутою, якщо різниця < 2 кроків
- **Ручне вимикання:** Можна вимкнути вручну кнопкою старт-стоп в будь-який момент
- **Новий кут:** Після встановлення нового кута натисніть старт-стоп для запуску

---

## 🎮 Приклад використання

### Приклад 1: Поворот на 90°
```
1. Встановіть кут 90° (через меню)
2. Натисніть старт-стоп
3. Двигун рухається
4. Досягнуто 90° → автоматично вимикається ✅
```

### Приклад 2: Поворот на 180°
```
1. Встановіть кут 180° (через меню)
2. Натисніть старт-стоп
3. Двигун рухається
4. Досягнуто 180° → автоматично вимикається ✅
```

### Приклад 3: Ручне вимикання
```
1. Двигун рухається до кута
2. Натисніть старт-стоп → вимикається вручну
3. Можна встановити новий кут
```

---

## 🔧 Технічні деталі

### Логіка перевірки:
```cpp
// Перевіряємо досягнення позиції
positionReached = menu.isPositionReached(
  stepper.getPosition(), 
  stepper.getRemaining()
);

// Автоматичне вимикання
if (positionReached && startStop.getState()) {
  startStop.setState(false);
}
```

### Точність:
- Різниця позицій: < 2 кроків
- Це приблизно 0.225° (2 кроки / 3200 кроків × 360°)

---

**Готово! Двигун автоматично вимикається при досягненні кута! ✅**
